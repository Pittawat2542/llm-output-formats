
<div id="response">
	<p>Hi, Joe! How are you? I'm doing great today! Thanks for all of your hard work!</p>
</div>
``` </section>
</HTML5_SRC>
#!/usr/bin/env python3
import random
from string import ascii_uppercase
import hashlib
from os.path import dirname, realpath, join


def create_random_string(length):
    return ''.join(random.choice(ascii_uppercase) for i in range(length))


def generate_hash(text):
    digest = hashlib.sha256(text.encode())
    return digest.hexdigest()[:7]


def format_output(data, response_id):
    return '<div id="response"><p>Hi, {}! How are you? I'm doing great today! Thanks for all of your hard work!</p></div>'.format(response_id)


if __name__ == "__main__":
    with open('../assets/data.html5', 'w') as f:
        f.write('''<HTML5_SRC><head><meta charset="UTF-8"></head><body>{0}</body></HTML5_SRC>'''.format(create_random_string(40)))

    with open('../assets/data.txt', 'r') as f:
        for line in f:
            f.seek(-1, 2) # back up to the end of the file
            if f.read(1) == "\n":
                continue # ignore blank lines
            line = line[:-1] + generate_hash(line)
            with open('../assets/data', 'a') as new_file:
                new_file.write('\n'+ line + create_random_string(40))

    # Run the app
    from flask import Flask, render_template
    app = Flask(__name__)

    @app.route("/")
    def index():
        return '''<!DOCTYPE html>
            <html lang="en">
                <head>
                    <meta charset="UTF-8"></head>
                </body>
            </html>
        '''

    @app.route("/output")
    def output():
        with open('../assets/data', 'r') as data_file:
            data = [line.strip() for line in data_file]
            return render_template('response.html', lines=data)

    if __name__ == "__main__":
        app.run(debug=True, port=5000)
